<!--

    "event" parameter passed in. This parameter contains...
     - eid
     - etyid
     - etid_used
     - begin
     - end
     - open
     - show
     - data
     - updated
     - name

-->

<% let startDateString = event.start.getFullYear() + "-" + (event.start.getMonth() + 1).toString().padStart(2, '0') + "-" + event.start.getDate().toString().padStart(2, '0') %>
<% let startTimeString = event.start.getHours().toString().padStart(2, '0') + ":" + event.start.getMinutes().toString().padStart(2, '0') %>
<% let endDateString = event.ending.getFullYear() + "-" + (event.ending.getMonth() + 1).toString().padStart(2, '0') + "-" + event.ending.getDate().toString().padStart(2, '0') %>
<% let endTimeString = event.ending.getHours().toString().padStart(2, '0') + ":" + event.ending.getMinutes().toString().padStart(2, '0') %>

<div class="floating-box event" style="border-top-color: <%= eventType.color %>">
    <div class="flex apart event-header">
        <div class="flex center icon-container">
            <span class="material-symbols-rounded large" data-etyid="<%= eventType.etyid %>" <%= eventType.icon.startsWith("IMAGE:") ? "hidden" : "" %> name="icon_icon"><%= eventType.icon %></span>
            <img class="icon<%= eventType.icon.startsWith("IMAGE:") ? "" : " no-display event-image" %>" data-etyid="<%= eventType.etyid %>" name="icon_image"  src="<%= eventType.icon %>"/>
        </div>
        
        <div class="event-content">
            <div class="flex center">
                <span class="title event-title"><%= event.name %></span>
            </div>
            
            
        </div>
    </div>
    
    <div class="flex center spacing-bottom">
        <span class="small material-symbols-rounded spacing-right">schedule</span>
        <span class="small"><%= startDateString %> <%= startTimeString %></span>

    </div>
    <div class="flex center">
        <span class="tiny event-description"><%= event.description %></span>
    </div>

    <div class="flex apart event-date">
        <div>
            <% if(user) { %>
                <span class="tiny"><i>You are attending</i></span>
            <% } %>
        </div>
        <div class="flex center">
            <button class="button-main info-bg" style="background-color: <%= eventType.color %>;" onclick="window.location = '/event/<%= event.eid %>'"><span class="button-text">View Event</span></button>
        </div>
    </div>
    
</div>